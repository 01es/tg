<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0px; padding: 0px }
  #map_canvas { height: 100%; background-color: #666970; }
</style>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">
  function initialize() {
    var locations = [
      ['Bondi Beach', -33.890542, 151.274856, 4],
      ['Coogee Beach', -33.923036, 151.259052, 5],
      ['Cronulla Beach', -34.028249, 151.157507, 3],
      ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
      ['Maroubra Beach', -33.950198, 151.259302, 1]
    ];
    var latlng = new google.maps.LatLng(-33.92, 151.25);
    var myOptions = {
      zoom: 10,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      mapTypeControl: false,
      navigationControl: false,
      streetViewControl: false,
      backgroundColor: "#666970"
    };

    document.geocoder = new google.maps.Geocoder();
    document.map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
    document.viewBounds = new google.maps.LatLngBounds();
    
    /**
	 * @param {google.maps.Map} map
	 * @param {google.maps.LatLng} latlng
	 * @param {int} z
	 * @return {google.maps.Point}
	*/
	var latlngToPoint = function(map, latlng1, z){
		// map.getProjection();
		map.getProjection().fromLatLngToPoint(latlng1);
		// var normalizedPoint = map.getProjection().fromLatLngToPoint(latlng1); // returns x,y normalized to 0~255
		// var scale = Math.pow(2, z);
		// var pixelCoordinate = new google.maps.Point(normalizedPoint.x * scale, normalizedPoint.y * scale);
		// return pixelCoordinate;
		return null; 
	};
	
	document.convertPoint2 = function convertPoint2(latLng) {
         var topRight=document.map.getProjection().fromLatLngToPoint(document.map.getBounds().getNorthEast()); 
         var bottomLeft=document.map.getProjection().fromLatLngToPoint(document.map.getBounds().getSouthWest()); 
         var scale=Math.pow(2,document.map.getZoom()); 
         var worldPoint=document.map.getProjection().fromLatLngToPoint(latLng); 
         return new google.maps.Point((worldPoint.x-bottomLeft.x)*scale,(worldPoint.y-topRight.y)*scale); 
    } 
	
	document.getNorthEast = function getNorthEast() {
	    return document.map.getBounds().getNorthEast();
	}
	
	document.getSouthWest = function getSouthWest() {
		return document.map.getBounds().getSouthWest();
	}
	
	document.convertPoint = function convertPoint(lat, lng) {
	     var latLng = new google.maps.LatLng(lat, lng); 
         var topRight=document.map.getProjection().fromLatLngToPoint(document.map.getBounds().getNorthEast()); 
         var bottomLeft=document.map.getProjection().fromLatLngToPoint(document.map.getBounds().getSouthWest()); 
         var scale=Math.pow(2,document.map.getZoom()); 
         var worldPoint=document.map.getProjection().fromLatLngToPoint(latLng); 
         return new google.maps.Point((worldPoint.x-bottomLeft.x)*scale,(worldPoint.y-topRight.y)*scale); 
    } 

    var infowindow = new google.maps.InfoWindow();
    
    var marker, i; 

    /* for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: document.map,
        icon: new google.maps.MarkerImage('marker.png', null, null, new google.maps.Point(8, 8))
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    } */

    document.setZoom = function setZoom(zoomLevel) {
    	if (zoomLevel >= 0 && zoomLevel <= 21) document.map.setZoom(zoomLevel);
    }
	
    document.zoomIn = function zoomIn() {
    	var zoomLevel = document.map.getZoom();
    	if (zoomLevel <= 20) document.map.setZoom(zoomLevel + 1);
    }

    document.zoomOut = function zoomOut() {
    	var zoomLevel = document.map.getZoom();
    	if (zoomLevel > 0) document.map.setZoom(zoomLevel - 1);
    }
    
    document.panBy = function panBy(deltaX, deltaY) {
    	document.map.panBy(deltaX, deltaY);
    }

    document.setMapTypeRoad = function setMapTypeRoad() {
    	document.map.setMapTypeId(google.maps.MapTypeId.ROADMAP);
    }
    document.setMapTypeSatellite = function setMapTypeSatellite() {
    	document.map.setMapTypeId(google.maps.MapTypeId.SATELLITE);
    }
    document.setMapTypeHybrid = function setMapTypeHybrid() {
    	document.map.setMapTypeId(google.maps.MapTypeId.HYBRID);
    }
    document.setMapTypeTerrain = function setMapTypeTerrain() {
    	document.map.setMapTypeId(google.maps.MapTypeId.TERRAIN);
    }

    document.goToLocation = function goToLocation(searchString) {
        document.geocoder.geocode( {'address': searchString}, function(results, status) {
      	  if (status == google.maps.GeocoderStatus.OK) {
            document.map.setCenter(results[0].geometry.location);
          } else {
            alert("Geocode was not successful for the following reason: " + status);
          }
        });
    }
    
    document.setCenter = function setCenter(lat, lng) {
        document.map.setCenter(new google.maps.LatLng(lat, lng));
    }
    
	document.convertPoint(-33.92, 151.25);    
  }
</script>
</head>
<body onload="initialize()">
  <div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html>