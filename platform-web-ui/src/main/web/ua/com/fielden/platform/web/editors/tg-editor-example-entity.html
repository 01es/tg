<link rel="import" href="/resources/polymer/polymer/polymer.html">
<link rel="import" href="/tg-reflector">

<dom-module id="tg-editor-example-entity">
    <template>
        <tg-reflector id="reflector"></tg-reflector>
    </template>
</dom-module>

    <script>
        Polymer({
        	is: 'tg-editor-example-entity',
        	
        	properties: {
        		bindingEntity: {
        			type: Object,
        			notify: true
        			/* value: function () {
                		var bindingEntity = this.createBindingEntity();
                		
                		return bindingEntity;
        			} */
        		},
        		
        		validationCallback: {
        			type: Object,
        			notify: true,        			
        			/* value: function () {
        				console.log("tg-editor-example-entity. !!!validationCallback default value is intitialised!!!");
        				var func = function () {
        					console.log("tg-editor-example-entity. !!!validationCallback!!!");
        				};
        				return func;
        			}, */
                	observer: '_validationCallbackChanged'
        		}
        	},
        	
        	ready: function () {
        		this.bindingEntity = this.createBindingEntity();
        		
        		this.validationCallback = function () {
        			console.log("!!!validationCallback2!!!");
        		};
        	},
        	
        	createBindingEntity: function () {
				var bindingView = this.$.reflector.newEntity('ua.com.fielden.platform.sample.domain.TgPersistentEntityWithProperties');
                bindingView["id"] = 333;
                bindingView["version"] = 0;
                
                bindingView["@@origin"] = null;
                
                bindingView['integerProp'] = 23;
                
                bindingView["@integerProp_editable"] = true;
                
                bindingView.prop('integerProp');
                bindingView.type().prop('integerProp');
        		
        		console.log("this.bindingEntity", bindingView);
				return bindingView;
        	},
        	
            _validationCallbackChanged: function (newValue, oldValue) {
            	console.log("_validationCallbackChangedXXX:", newValue, oldValue);
            }
        });
    </script>