<!doctype html>
<html>

<head>
    <title>Entity Grid Inspector Example</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

    <script src="/resources/polymer/webcomponentsjs/webcomponents.js"></script>

    <link rel="import" href="/resources/polymer/core-ajax/core-ajax.html">
    <link rel="import" href="/resources/polymer/font-roboto/roboto.html">
    <link rel="import" href="/resources/polymer/paper-button/paper-button.html">
    <link rel="import" href="/resources/egi/tg-entity-grid-inspector.html">
    <link rel="import" href="/resources/egi/tg-property-column.html">
    <link rel="import" href="/resources/egi/tg-primary-instance-action.html">
    <link rel="import" href="/resources/serialisation/tg-serialiser.html">
    <link rel="import" href="/resources/polymer/core-icon-button/core-icon-button.html">
    <link rel="import" href="/resources/polymer/core-tooltip/core-tooltip.html">
    <link rel="import" href="/resources/polymer/core-icons/core-icons.html">
    <link rel="import" href="/resources/polymer/core-icons/editor-icons.html">
    <link rel="import" href="/resources/polymer/core-icons/hardware-icons.html">

    <style>
        body {
            font-family: "RobotoDraft";
        }
        core-icon-button.revers::shadow core-icon {
            transform: scale(-1, 1);
        }
    </style>

</head>

<body unresolved fullbleed layout vertical center style="background-color: #f5f5f5;">

    <template id="egi_example" is="auto-binding">
        <tg-serialiser id="serialiser"></tg-serialiser>
        <core-ajax id="data_retriever" url="/test/egi" handleas="json" on-core-response="{{onDataRetrieved}}"></core-ajax>
        <tg-entity-grid-inspector entityType="{{entityType}}" entities="{{entities}}">
            <tg-property-column property="" width="60px" type="ua.com.fielden.platform.sample.domain.TgPersistentEntityWithProperties" columnTitle="Key" columnDesc="Some key description"></tg-property-column>
            <tg-property-column property="desc" width="200px" type="String" columnTitle="Desc" columnDesc="Some desc description">
            </tg-property-column>
            <tg-property-column property="integerProp" width="42px" type="Integer" columnTitle="Integer prop" columnDesc="Integer prop desc">
            </tg-property-column>
            <tg-property-column property="integerProp" width="42px" type="Integer" columnTitle="Integer prop" columnDesc="Integer prop desc">
            </tg-property-column>
            <tg-property-column property="integerProp" width="42px" type="Integer" columnTitle="Integer prop" columnDesc="Integer prop desc">
            </tg-property-column>
            <tg-property-column property="integerProp" width="42px" type="Integer" columnTitle="Integer prop" columnDesc="Integer prop desc">
            </tg-property-column>
            <tg-property-column property="integerProp" width="42px" type="Integer" columnTitle="Integer prop" columnDesc="Integer prop desc">
            </tg-property-column>
            <tg-property-column property="integerProp" width="42px" type="Integer" columnTitle="Integer prop" columnDesc="Integer prop desc">
            </tg-property-column>
            <tg-property-column property="bigDecimalProp" width="68px" type="BigDecimal" columnTitle="BigDecimal prop" columnDesc="BigDecimal prop desc">
            </tg-property-column>
            <tg-property-column property="integerProp" width="42px" type="Integer" columnTitle="Integer prop" columnDesc="Integer prop desc">
            </tg-property-column>
            <tg-property-column property="integerProp" width="42px" type="Integer" columnTitle="Integer prop" columnDesc="Integer prop desc">
            </tg-property-column>
            <tg-property-column property="bigDecimalProp" width="68px" type="BigDecimal" columnTitle="BigDecimal prop" columnDesc="BigDecimal prop desc">
            </tg-property-column>
            <tg-property-column property="bigDecimalProp" width="68px" type="BigDecimal" columnTitle="BigDecimal prop" columnDesc="BigDecimal prop desc">
            </tg-property-column>
            <tg-property-column property="stringProp" width="50px" type="String" columnTitle="String prop" columnDesc="String prop desc"></tg-property-column>
            <core-tooltip class="delayed entity-specific-action">
                <core-icon-button icon="add-circle-outline"></core-icon-button>
                <span class="span-tooltip" tip>Create new entity</span>
            </core-tooltip>
            <core-tooltip class="delayed entity-specific-action">
                <core-icon-button icon="editor:mode-edit"></core-icon-button>
                <span class="span-tooltip" tip>Edit selected entity</span>
            </core-tooltip>
            <core-tooltip class="delayed entity-specific-action">
                <core-icon-button icon="remove-circle-outline"></core-icon-button>
                <span class="span-tooltip" tip>Delete selected entity</span>
            </core-tooltip>
            <core-tooltip class="delayed standart-action">
                <core-icon-button icon="file-download"></core-icon-button>
                <span class="span-tooltip" tip>Export to Excel</span>
            </core-tooltip>
            <core-tooltip class="delayed standart-action">
                <core-icon-button class="revers" icon="hardware:keyboard-tab"></core-icon-button>
                <span class="span-tooltip" tip>First page</span>
            </core-tooltip>
            <core-tooltip class="delayed standart-action">
                <core-icon-button icon="hardware:keyboard-backspace"></core-icon-button>
                <span class="span-tooltip" tip>Previous page</span>
            </core-tooltip>
            <core-tooltip class="delayed standart-action">
                <core-icon-button class="revers" icon="hardware:keyboard-backspace"></core-icon-button>
                <span class="span-tooltip" tip>Next page</span>
            </core-tooltip>
            <core-tooltip class="delayed standart-action">
                <core-icon-button icon="hardware:keyboard-tab"></core-icon-button>
                <span class="span-tooltip" tip>Last page</span>
            </core-tooltip>
            <core-tooltip class="delayed standart-action">
                <core-icon-button icon="refresh" on-tap="{{loadData}}"></core-icon-button>
                <span class="span-tooltip" tip>Refresh</span>
            </core-tooltip>
            <tg-primary-instance-action actionDesc="action description" icon="editor:mode-edit"></tg-primary-instance-action>
        </tg-entity-grid-inspector>
    </template>

    <script>
        (function () {
            var egiExample = document.querySelector('#egi_example'),
                i = 0,
                entity = null;
            egiExample.entityType = "ua.com.fielden.platform.sample.domain.TgPersistentEntityWithProperties";
            egiExample.entities = [];
            egiExample.loadData = function(e, detail, source) {
                egiExample.$.data_retriever.go();
            };
            egiExample.onDataRetrieved = function (e, detail, source) {
                egiExample.entities = egiExample.$.serialiser.deserialise(e.detail.response).instance;
            };
        })();
    </script>

</body>

</html>
