<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>@title</title>
    <script src="/resources/polymer/webcomponentsjs/webcomponents.js"></script>
    <link rel="import" href="/resources/polymer/core-animated-pages/core-animated-pages.html">
    <link rel="import" href="/resources/polymer/core-animated-pages/transitions/slide-from-bottom.html">
    <link rel="import" href="/resources/polymer/flatiron-director/flatiron-director.html">
    <link rel="import" href="/resources/polymer/paper-button/paper-button.html">
    <link rel="import" href="/resources/polymer/paper-dialog/paper-dialog.html">
    <link rel="import" href="/resources/polymer/font-roboto/roboto.html">
    <link rel="import" href="/resources/layout/tg-view-with-menu.html">
    <link rel="import" href="/tg-web-app/tg-main-menu.html">

    <style>
        body {
            font-family: "RobotoDraft";
        }
        html /deep/ .menu-dialog::shadow #actions {
            color: #03A9F4;
        }
        html /deep/ .menu-dialog::shadow #scroller {
            margin: 4px;
        }
    </style>

</head>

<body unresolved fullbleed>
    <template is="auto-binding" id="app_template">
        <flatiron-director route="{{route}}" on-director-route="{{onRouteChanged}}" autohash></flatiron-director>
        <core-animated-pages selected="{{activePage}}" valueattr="id" transitions="slide-from-bottom" fit>
            <tg-view-with-menu id="sysservice" label="System/Service" pages="{{sysServicePages}}" route="{{route}}" on-show-menu="{{onShowMenu}}"></tg-view-with-menu>
            <tg-view-with-menu id="equipment" label="Equipment" pages="{{equipmentPages}}" route="{{route}}" on-show-menu="{{onShowMenu}}"></tg-view-with-menu>
            <tg-view-with-menu id="workactivities" label="Work Activity" pages="{{workActivityPages}}" route="{{route}}" on-show-menu="{{onShowMenu}}"></tg-view-with-menu>
        </core-animated-pages>
        <paper-dialog style="background-color: #EEEEEE;" class="menu-dialog" id="menuDialog" backdrop autoCloseDisabled>
            <tg-main-menu id="mainMenu" on-menu-selected="{{onMainMenuSelected}}"></tg-main-menu>
        </paper-dialog>
    </template>
    <script>
        (function () {
            var template = document.querySelector('#app_template');
            template.sysServicePages = [{
                name: "System Configuration",
                hash: "sysservice/sysconfiguration",
                url: "sys-config-home.html",
                submenu: [{
                    name: "Categories",
                    hash: "sysservice/sysconfiguration/categories",
                    url: "sys-config-categories.html"
                }, {
                    name: "Systems",
                    hash: "sysservice/sysconfiguration/systems",
                    url: "sys-config-systems.html"
                }, {
                    name: "Subsystems",
                    hash: "sysservice/sysconfiguration/subsystems",
                    url: "sys-config-subsystems.html"
                }, {
                    name: "Subsystem/Location",
                    hash: "sysservice/sysconfiguration/subsysloc",
                    url: "sys-config-subsysloc.html"
                }, {
                    name: "Services",
                    hash: "sysservice/sysconfiguration/services",
                    url: "sys-config-services.html"
                }, {
                    name: "Matrix",
                    hash: "sysservice/sysconfiguration/matrix",
                    url: "sys-config-matrix.html"
                }]
            }, {
                name: "Hierarchy",
                hash: "sysservice/hierarchy",
                url: "sys-hierarchy.html"
            }, {
                name: "Availability Profile",
                hash: "sysservice/availprofile",
                url: "sys-avail-profile.html"
            }, {
                name: "Service Availability",
                hash: "sysservice/serviceavail",
                url: "ser-avail.html",
                submenu: [{
                    name: "Entry/Review",
                    hash: "sysservice/serviceavail/entreview",
                    url: "ser-avail-entreview.html"
                }, {
                    name: "History",
                    hash: "sysservice/serviceavail/history",
                    url: "ser-avail-history.html"
                }, ]
            }, {
                name: "Service Sentinel Settings",
                hash: "sysservice/sentsettings",
                url: "ser-sent-settings.html"
            }, {
                name: "SLA Batch Replacement",
                hash: "sysservice/slabatchreplacement",
                url: "sys-sla-batch-replacement.html"
            }, {
                name: "SLA Extended Description",
                hash: "sysservice/slaextdesc",
                url: "sla-extdesc.html",
                submenu: [{
                    name: "Imported Data",
                    hash: "sysservice/slaextdesc/importdata",
                    url: "sla-extdesc-importdata.html"
                }, {
                    name: "Stored Data",
                    hash: "sysservice/slaextdesc/storeddata",
                    url: "sla-extdesc-storeddata.html"
                }, ]
            }, {
                name: "BU Services Relationship",
                hash: "sysservice/bu",
                url: "bu-service.html",
                submenu: [{
                    name: "Link/Review",
                    hash: "sysservice/bu/linkreview",
                    url: "bu-service-linkreview.html"
                }, {
                    name: "History",
                    hash: "sysservice/bu/history",
                    url: "bu-service-history.html"
                }, ]
            }];
            template.equipmentPages = [{
                name: "Hierarchy",
                hash: "equipment/hierarchy",
                url: "eq-hierarchy.html"
            }, {
                name: "Rotables",
                hash: "equipment/rotables",
                url: "eq-rotables.html",
                submenu: [{
                    name: "Rotable Notes",
                    hash: "equipment/rotables/notes",
                    url: "eq-rotables-notes.html"
                }, {
                    name: "Rotable Special Details",
                    hash: "equipment/rotables/specdetails",
                    url: "eq-rotables-specdetails.html"
                }, {
                    name: "Rotables History",
                    hash: "equipment/rotables/history",
                    url: "eq-rotables-history.html"
                }, {
                    name: "Rotable Movement",
                    hash: "equipment/rotables/movement",
                    url: "eq-rotables-movement.html"
                }, {
                    name: "Reservations",
                    hash: "equipment/rotables/reservations",
                    url: "eq-rotables-reservations.html"
                }, {
                    name: "Issues History",
                    hash: "equipment/rotables/issues",
                    url: "eq-rotables-issues.html"
                }, {
                    name: "Rotable SEO List",
                    hash: "equipment/rotables/seolist",
                    url: "eq-rotables-seolist.html"
                }, {
                    name: "Rotable Parts",
                    hash: "equipment/rotables/parts",
                    url: "eq-rotables-parts.html"
                }, {
                    name: "Drawings",
                    hash: "equipment/rotables/drawings",
                    url: "eq-rotables-drawings.html"
                }]
            }, {
                name: "Meter Readings",
                hash: "equipment/readings",
                url: "eq-readings.html"
            }, {
                name: "Messages",
                hash: "equipment/messages",
                url: "eq-messages.html"
            }, {
                name: "Specifications",
                hash: "equipment/specifications",
                url: "eq-specifications.html"
            }];
            template.workActivityPages = [{
                name: "Work Activity Centre",
                hash: "workactivities/centre",
                url: "wa-centre.html"
            }, {
                name: "Projects",
                hash: "workactivities/projects",
                url: "wa-projects.html",
                submenu: [{
                    name: "Major Project",
                    hash: "workactivities/projects/major",
                    url: "wa-projects-major.html"
                }, {
                    name: "Major Project Cost",
                    hash: "workactivities/projects/cost",
                    url: "wa-projects-cost.html"
                }, {
                    name: "MS Project Export/Import",
                    hash: "workactivities/projects/ms",
                    url: "wa-projects-ms.html"
                }]
            }, {
                name: "Timesheets",
                hash: "workactivities/timesheets",
                url: "wa-timesheets.html",
                submenu: [{
                    name: "Daily Timesheets",
                    hash: "workactivities/timesheets/daily",
                    url: "wa-timesheets-daily.html"
                }, {
                    name: "Review/Approve/Export",
                    hash: "workactivities/timesheets/rae",
                    url: "wa-timesheets-rae.html"
                }]
            }, {
                name: "Timesheet Delegation",
                hash: "workactivities/delegation",
                url: "wa-delegation.html"
            }, {
                name: "Personnel Unavailability",
                hash: "workactivities/personunavail",
                url: "wa-personunavail.html"
            }, {
                name: "Legacy Timesheets",
                hash: "workactivities/legacy",
                url: "wa-legacy.html",
                submenu: [{
                    name: "Timesheet Review",
                    hash: "workactivities/legacy/review",
                    url: "wa-legacy-review.html"
                }, {
                    name: "Timesheet Entry",
                    hash: "workactivities/legacy/entry",
                    url: "wa-legacy-entry.html"
                }]
            }];
            template.onRouteChanged = function (event, detail) {
                var splitDetail = detail.split("/");
                if (splitDetail.length >= 2) {
                    template.activePage = splitDetail[0];
                    document.querySelector("#" + template.activePage).activatePage(detail);
                }
            },
            template.onMainMenuSelected = function (event, detail, source) {
                if (detail !== document.querySelector("#mainMenu").returnId) {
                    //this.route = document.querySelector(detail).activeSubPage || document.querySelector("#mainMenu").activePage;
                }
                document.querySelector("#menuDialog").close();
            },
            template.onShowMenu = function (event, detail, source) {
                document.querySelector("#menuDialog").open();
            }
        })();
    </script>
</body>

</html>