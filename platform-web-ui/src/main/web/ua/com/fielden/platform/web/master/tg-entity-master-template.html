<!--@imports-->

<link rel="import" href="/resources/master/tg-entity-master.html">
<link rel="import" href="/resources/master/tg-entity-master-behavior.html">

<!-- TODO this import should be generated <link rel="import" href="/resources/master/actions/tg-action.html"> -->

<dom-module id="tg-@entity_type-master"> <!-- TODO layout vertical -->
    <template>
    	<tg-entity-master
    		id="masterDom"
    		entity-type="[[entityType]]" 
    		entity-id="[[entityId]]"
    		_post-validated-default="[[_postValidatedDefault]]"
    		_post-validated-default-error="[[_postValidatedDefaultError]]"
    		_process-response="[[_processResponse]]"
    		_process-error="[[_processError]]"
    		_process-retriever-response="[[_processRetrieverResponse]]"
    		_process-retriever-error="[[_processRetrieverError]]"
    		_process-saver-response="[[_processSaverResponse]]"
    		_process-saver-error="[[_processSaverError]]"
    		_saver-loading="{{_saverLoading}}">
   	        <!--START OF GENERATED TG-ENTITY-MASTER DOM CONTENT-->
   	        <!--@tg-entity-master-content-->
   	        <!--END OF GENERATED TG-ENTITY-MASTER DOM CONTENT-->
   	        
    	</tg-entity-master>
    </template>
</dom-module>

<script>
    (function () {
        Polymer({
        	is: 'tg-@entity_type-master',
        	
        	behaviors: [ Polymer.TgBehaviors.TgEntityMasterBehavior ],
        	
        	properties: {
        		/**
        		 * The property which indicates whether entity master is 'UI-less'.
        		 */
	            noUI: {
	                type: Boolean,
	                value: @noUiValue
	            },
	            
	            /** 
	             * This property govenrs master behavior upon its activation for the first time (i.e. when master element was instantiated and bound to an entit instance).
	             * If saveOnActivation is true then entity saving occurs automatically just before the master UI gets displayed.
	             * It most conveniently used for masters that represent functional entities (i.e. actions).
	             * */
	            saveOnActivation: {
	                type: Boolean,
	                value: @saveOnActivationValue
	            }
        	},

            /**
             * Initialisation block. It has all children web components already initialised.
             */
            ready: function () {
                var self = this;
                
                //START OF GENERATED JS LOGIC
                //@ready-callback
                //END OF GENERATED JS LOGIC
            },// end of ready
            
            _masterDom: function () {
            	return this.$.masterDom;
            },
            
            /**
             * The core-ajax component for entity retrieval.
             */
            _ajaxRetriever: function () {
                return this._masterDom()._ajaxRetriever();
            },
            
            /**
             * The core-ajax component for entity saving.
             */
            _ajaxSaver: function () {
                return this._masterDom()._ajaxSaver();
            },
            
            /**
             * The validator component.
             */
            _validator: function () {
                return this._masterDom()._validator();
            },
            
            /**
             * The component for entity serialisation.
             */
            _serialiser: function () {
            	return this._masterDom()._serialiser();
            },
            
            /**
             * The reflector component.
             */
            _reflector: function () {
            	return this._masterDom()._reflector();
            },
            
            /**
             * The toast component.
             */
            _toastGreeting: function () {
            	return this._masterDom()._toastGreeting();
            }
            
            /* _handleScroll: function(e) {
               this.fire("scroll-container", e.target);
            } */
        });
    })();
</script>