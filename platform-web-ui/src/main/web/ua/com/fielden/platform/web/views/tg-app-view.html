<link rel="import" href="/resources/polymer/polymer/polymer.html">
<link rel="import" href="/resources/polymer/core-icon/core-icon.html">
<link rel="import" href="/resources/views/tg-view.html">
<link rel="import" href="/resources/views/tg-view-with-menu.html">

<polymer-element name="tg-app-view" attributes="user, item autoLoad" vertical layout>
    <template>
        <style>
            .item-bg {
                width: 512px;
                height: 512px;
            }
            .item-bg > core-icon {
                position: absolute;
                height: 100%;
                width: 100%;
            }
        </style>
        <div style="background-color: {{item.bgColor}}" fit layout vertical center center-justified>
            <div class="item-bg" relative>
                <core-icon style="color: {{item.bgColor}}; opacity:0.3" src="{{item.detailIcon}}" fit></core-icon>
            </div>
        </div>
        <div flex vertical layout cross-fade>
            <template if="{{!item.menu}}">
                <tg-view id="view" autoLoad?="{{autoLoad}}" item="{{item}}" fit></tg-view>
            </template>
            <template if="{{item.menu}}">
                <tg-view-with-menu user="{{user}}" id="view" item="{{item}}" fit></tg-view-with-menu>
            </template>
        </div>
    </template>
    <script>
        (function () {
            Polymer({
                publish: {
                    autoLoad: {
                        reflect: true,
                        value: false
                    }
                },
                load: function () {
                    this.$.view.load();
                },
                ready: function () {
                    console.log(this.$.view);
                }
            });
        })();
    </script>
</polymer-element>