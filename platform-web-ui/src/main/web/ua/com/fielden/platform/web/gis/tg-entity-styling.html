<script>
(function() {
	var EntityStyling = function() {};

	/**
	 * The method for getting weight for features of different types (designed for overriding). 
	 * Query the type of entity with 'featureType(feature)' method.
	 */
	EntityStyling.prototype.getWeight = function (feature) {
		return 5;
	}

	/**
	 * The method for getting opacity for features of different types (designed for overriding). 
	 * Query the type of entity with 'featureType(feature)' method.
	 */
	EntityStyling.prototype.getOpacity = function (feature) {
		return 0.65;
	}

	/**
	 * The method for getting color for features of different types (designed for overriding). 
	 * Query the type of entity with 'featureType(feature)' method.
	 */
	EntityStyling.prototype.getColor = function (feature) {
		if (feature) {
		    var featureType = featureType(feature);
			if (featureType === 'Message') {
				return (feature.vectorSpeed > 0) ? "blue" : "red"; // TODO this is irrelevant because Message is represented with markers
			} else if (featureType === 'Summary_Message') {
				return "blue";
			} else {
				throw "EntityStyling.prototype.getColor: [" + feature + "] has unknown type == [" + featureType + "]. Should be 'Message' or 'Summary_Message'.";
			}
		} else {
			throw "EntityStyling.prototype.getColor: [" + feature + "] is empty.";
		}
	}

	EntityStyling.prototype.getStyle = function (feature) {
		return {
			// fillColor: getColor(feature),
			weight: this.getWeight(feature),
			opacity: this.getOpacity(feature),
			color: this.getColor(feature)
			// dashArray: '3',
			// fillOpacity: 0.7
		};
	}

	L.GIS = L.GIS || {};
	L.GIS.EntityStyling = EntityStyling;
})();
</script>