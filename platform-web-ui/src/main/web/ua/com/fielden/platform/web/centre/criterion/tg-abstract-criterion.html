<link rel="import" href="/resources/polymer/polymer/polymer.html">

<link rel="import" href="/tg-reflector">
<link rel="import" href="/resources/layout/tg-flex-layout.html">

<link rel="import" href="/resources/polymer/paper-icon-button/paper-icon-button.html">

<link rel="import" href="/resources/polymer/paper-button/paper-button.html">
<link rel="import" href="/resources/polymer/paper-dialog/paper-dialog.html">
<link rel="import" href="/resources/polymer/neon-animation/animations/scale-up-animation.html">
<link rel="import" href="/resources/polymer/neon-animation/animations/fade-out-animation.html">

<link rel="import" href="/resources/polymer/paper-dialog-scrollable/paper-dialog-scrollable.html">

<dom-module id="tg-abstract-criterion">
    <template>
        <paper-dialog id="metaValueEditor" class="meta-value-editor" with-backdrop no-cancel-on-outside-click entry-animation="scale-up-animation" exit-animation="fade-out-animation" on-iron-overlay-closed="_closed">

            <paper-dialog-scrollable>
                <div class="metavalue-editor layout vertical">
                    <content select=".multi-criterion-config"></content>
                    <content select=".range-criterion-config"></content>
                    <content select=".date-range-criterion-config"></content>
                </div>
            </paper-dialog-scrollable>

            <div class="buttons">
                <paper-button dialog-dismiss affirmative on-tap="_cancelMetaValues">Cancel</paper-button>
                <paper-button dialog-confirm affirmative autofocus on-tap="_acceptMetaValues">Ok</paper-button>
            </div>
        </paper-dialog>
        <tg-reflector id="reflector"></tg-reflector>
        <tg-flex-layout when-desktop="[[_whenDesktop]]" when-tablet="[[_whenTablet]]" when-mobile="[[_whenMobile]]">
            <content select=".criterion-editors" id="components"></content>
            <paper-icon-button id="iconButton" on-tap="_showMetaValuesEditor" icon="more-vert"></paper-icon-buton>
        </tg-flex-layout>
    </template>
</dom-module>

<script>
    Polymer({
        is: 'tg-abstract-criterion',

        properties: {
            _cancelMetaValues: Function,
            _acceptMetaValues: Function,
            _showMetaValuesEditor: Function,
            _computeIconButtonStyle: Function,
            _whenDesktop: Array,
            _whenTablet: Array,
            _whenMobile: Array
        },

        _closed: function (e) {
            Polymer.dom(document.body).removeChild(this.$.metaValueEditor);
            Polymer.dom.flush();
        }

    });
</script>