<link rel="import" href="/resources/polymer/polymer/polymer.html">

<link rel="import" href="/tg-reflector">
<link rel="import" href="/resources/layout/tg-flex-layout.html">
<link rel="import" href="/resources/components/tg-accordion.html">
<link rel="import" href="/resources/components/tg-accordion-group.html">

<link rel="import" href="/resources/polymer/paper-icon-button/paper-icon-button.html">

<link rel="import" href="/resources/polymer/paper-checkbox/paper-checkbox.html">

<link rel="import" href="/resources/polymer/paper-button/paper-button.html">
<link rel="import" href="/resources/polymer/paper-dialog/paper-dialog.html">
<link rel="import" href="/resources/polymer/neon-animation/animations/scale-up-animation.html">
<link rel="import" href="/resources/polymer/neon-animation/animations/fade-out-animation.html">

<!-- <link rel="import" href="/resources/polymer/paper-radio-button/paper-radio-button.html"> -->

<dom-module id="tg-abstract-criterion">
	<link rel="import" type="css" href="/resources/centre/criterion/tg-abstract-criterion.css">
    <template>
        <paper-dialog 
        	class="meta-value-editor" 
        	id="metaValueEditor" 
        	with-backdrop 
        	no-cancel-on-outside-click 
        	entry-animation="scale-up-animation"
        	exit-animation="fade-out-animation">
            <div class="dialog-configs">
            	<content select=".multi-criterion-config"></content>
                <content select=".range-criterion-config"></content>
                <!-- <template if="{{_range}}">
                    <paper-checkbox label="Exclusive Left" checked="{{_exclusive}}"></paper-checkbox>
                    <paper-checkbox label="Exclusive Right" checked="{{_exclusive2}}"></paper-checkbox>
                </template> -->
                <content select=".date-range-criterion-config"></content>
                <!-- <template if="{{_dateRange}}">
                    <tg-accordion-group singleOpen>
                        <template repeat="{{prefix, pIndex in datePrefixes}}">
                            <tg-accordion opened?="{{(_datePrefix===null && pIndex===0) || _datePrefix===prefix}}" heading="{{prefixTitles[pIndex]}}">
                                <div layout horizontal>
                                    <template repeat="{{before, bIndex in andBefores}}">
                                        <div layout vertical>
                                            <template repeat="{{mnemonic, mIndex in dateMnemonics}}">
                                                <paper-radio-button prefix="{{prefix}}" mnemonic="{{mnemonic}}" andbefore="{{before}}" toggles label="{{mnemonicTitles[mIndex] + andBeforeTitles[bIndex]}}" on-change="{{dateMetaValueChanged}}" checked?="{{_datePrefix===prefix && _dateMnemonic===mnemonic && ((_andBefore===null && before==='THIS')||(_andBefore===true && before==='BEFORE')||(_andBefore===false && before==='AFTER'))}}"></paper-radio-button> 
                                            </template>
                                        </div>
                                    </template>
                                </div>
                            </tg-accordion>
                        </template>
                    </tg-accordion-group>
                </template> -->
            </div>
            <paper-button dialog-dismiss affirmative on-tap="_cancelMetaValues">Cancel</paper-button>
            <paper-button dialog-confirm affirmative autofocus on-tap="_acceptMetaValues">Ok</paper-button>
        </paper-dialog>
        <tg-reflector id="reflector"></tg-reflector>
        <content select=".criterion-editors" id="components"></content>
        <paper-icon-button id="iconButton" on-tap="_showMetaValuesEditor" icon="more-vert"></paper-icon-buton> <!-- , exclusive, exclusive2, datePrefix, dateMnemonic, andBefore -->
    </template>
</dom-module>

<script>
    Polymer({
    	is: 'tg-abstract-criterion',
    	
        properties: {
        	_cancelMetaValues: Function,
        	_acceptMetaValues: Function,
        	_showMetaValuesEditor: Function,
        	_computeIconButtonStyle: Function
        }
    });
</script>