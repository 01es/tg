<link rel="import" href="/resources/polymer/polymer/polymer.html">
<link rel="import" href="/resources/polymer/iron-list/iron-list.html">
<link rel="import" href="/resources/polymer/iron-scroll-threshold/iron-scroll-threshold.html">

<dom-module id="tg-number-selector">
    <style>
        .year-item {
            height: 2.2em;
            width: 2.2em;
            font-size: 12px;
            border-radius: 1.1em;
            cursor: pointer;
        }
        .year-item[selected] {
            background-color: #03A9F4;
            color: white;
        }
    </style>
    <template>
        <!--iron-scroll-threshold class="fit" on-lower-threshold="_loadNextNumbers" on-upper-threshold="_loadPreviousNumbers" lower-threshold="50" upper-threshold="50" id="threshold"-->
        <!--scroll-target="threshold"-->
        <iron-list class="fit" id="list" items="[[numbers]]"selected-item="{{selectedNumber}}">
            <template>
                <div class="number-item layout horizontal center-center" selected$="[[selected]]">
                    <div>[[item]]</div>
                </div>
            </template>
        </iron-list>
        <!--/iron-scroll-threshold-->
    </template>
</dom-module>
<script>
    (function () {
        Polymer({

            is: "tg-number-selector",

            properties: {
                selectedNumber: {
                    type: Number,
                    notify: true,
                    observer: "_selectedNumberChanged"
                },
                numbersToLoadAtOnce: {
                    type: Number,
                    value: 10
                }
            },

            ready: function () {
                this.numbers = [0, 1, 2, 3, 4, 5];
            }
            //            _selectedNumberChanged: function (newValue, oldValue) {
            //                var valueIndex;
            //                if (newValue !== null) {
            //                    if (this.$.list.items.length === 0) {
            //                        this.$.list.push("items", newValue);
            //                        this._loadPreviousNumbers();
            //                        this._loadNextNumbers();
            //                    } else if (newValue <= this.$.list.items[0]) {
            //                        this._loadPreviousNumbers(newValue);
            //                    } else if (newValue >= this.$.list.items[this.$.list.items.length - 1]) {
            //                        this._loadNextNumbers(newValue);
            //                    }
            //                    valueIndex = this.$.list.items.indexOf(newValue);
            //                    if (valueIndex < 0) {
            //                        throw "The element should have been loaded";
            //                    } else if (valueIndex < this.$.list.firstVisibleIndex || valueIndex > this.$.lastVisibleIndex) {
            //                        this.$.list.scrollToIndex(valueIndex);
            //                    }
            //                }
            //            },
            //
            //            _loadPreviousNumbers: function (toNumber) {
            //                if (this.$.list.items.length > 0) {
            //                    var startFrom = this.$.list.items[0];
            //                    var calcTo = toNumber || startFrom - this.numbersToLoadAtOnce;
            //                    if (calcTo < startFrom) {
            //                        for (startFrom -= 1; startFrom >= calcTo; startFrom--) {
            //                            this.$.list.unshift("items", startFrom);
            //                        }
            //                    }
            //                }
            //            },
            //
            //            _loadNextNumbers: function (toNumber) {
            //                if (this.$.list.items.length > 0) {
            //                    var startFrom = this.$.list.items[this.$.list.items.length - 1];
            //                    var calcTo = toNumber || startFrom + this.numbersToLoadAtOnce;
            //                    if (calcTo > startFrom) {
            //                        for (startFrom += 1; startFrom <= calcTo; startFrom++) {
            //                            this.$.list.push("items", startFrom);
            //                        }
            //                    }
            //                }
            //            }
        });
    })();
</script>