<link rel="import" href="/resources/polymer/polymer/polymer.html">

<link rel="import" href="/resources/editors/tg-editor-behavior.html">
<link rel="import" href="/resources/editors/tg-editor.html">

<dom-module id="tg-multiline-text-editor"> <!-- TODO layout vertical -->
    <style>
    </style>

    <template>
    	<tg-editor 
    		id="editorDom" 
    		_disabled="[[_disabled]]" 
    		_editing-value="{{_editingValue}}" 
    		action="[[action]]" 
    		_error="[[_error]]" 
    		_comm-value="[[_commValue]]" 
    		_accepted-value="[[_acceptedValue]]" 
    		debug="[[debug]]" 
    		_bound-on-change="[[_boundOnChange]]" 
    		_bound-on-keypress="[[_boundOnKeypress]]"
    		_maxLength="[[maxLength]]"
    		_bound-on-keypress-for-text-area="[[_boundOnKeypressForTextArea]]"
    		>
    	</tg-editor>
    </template>
</dom-module>

<script>
    Polymer({
    	is: 'tg-multiline-text-editor',
    	behaviors: [ Polymer.TgBehaviors.TgEditorBehavior ],
    	
    	ready: function () {
    		Polymer.TgBehaviors.TgEditorBehavior.ready.call(this);
    		
    		this.$.editorDom._editorKind = "MULTILINE_TEXT";
    		
    		// this.decorator().querySelector('#inputCounter').target = this.decorator().$.input;
    	},
    	
    	properties: {
        	/////////////////////////////////////////////////////////////////////////////////////////////////////////
        	////////////////////////////////////////// EXTERNAL PROPERTIES //////////////////////////////////////////
        	/////////////////////////////////////////////////////////////////////////////////////////////////////////
        	// These mandatory properties must be specified in attributes, when constructing <tg-*-editor>s.       //
        	// No default values are allowed in this case.														   //
        	/////////////////////////////////////////////////////////////////////////////////////////////////////////
        	
        	/**
        	 * The maximum count for textarea rows.
        	 */
        	maxLength: {
    			type: Number
    		}
    	},
    	
        /**
         * Converts the value into string representation (which is used in edititing / comm values).
         */
        convertToString: function (value) {
            return value === null ? "" : "" + value;
        },

        /**
         * Converts the value from string representation (which is used in edititing / comm values) into concrete type of this editor component (String).
         */
        convertFromString: function (strValue) {
            return strValue === '' ? null : strValue;
        }
    });
</script>