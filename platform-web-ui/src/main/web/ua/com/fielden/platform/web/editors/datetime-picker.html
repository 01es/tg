<link rel="import" href="/resources/polymer/polymer/polymer.html">
<link rel="import" href="/resources/polymer/core-dropdown/core-dropdown.html">
<link rel="import" href="/resources/polymer/core-input/core-input.html">
<link rel="import" href="/resources/polymer/paper-input/paper-input-decorator.html">
<link rel="import" href="/resources/polymer/core-icon-button/core-icon-button.html">
<link rel="import" href="/resources/polymer/core-style/core-style.html" >
<link rel="import" href="/resources/polymer/paper-dialog/paper-action-dialog.html">
<link rel="import" href="/resources/components/tg-calendar.html">

<core-style id="datetime-icon-decorator">

core-icon-button /deep/ core-icon[role="img"] {
  fill: {{g.paperInput.labelColor}};
}
    
core-icon-button:hover /deep/ core-icon,
#decorator[focused] /deep/ core-icon{
  fill: {{g.paperInput.focusedColor}};
}
    
.invalid core-icon-button /deep/ core-icon {
    fill : {{g.paperInput.invalidColor}};
}
</core-style>

<polymer-element name="datetime-picker" attributes="entity propertyName label">
    <template>
        <core-style ref="datetime-icon-decorator"></core-style>
        <style>
            core-icon-button /deep/ core-icon[role="img"] {
                height: 1.1em;
                width: 1.1em;
                padding: 0px;
                margin: 0px;
                vertical-align: top;
            }
            core-icon-button {
                padding: 0px;
                margin: 0px;
                height: 1.1em;
                width: 1.1em;
                font: inherit;
            }
        </style>
        <paper-input-decorator id="decorator" label="{{label}}" floatingLabel>
            <div layout horizontal>
                <div id="input-container" flex>
                    <input is="core-input" committedValue="{{entity[propertyName]}}" style="width:100%">
                </div>
                <div id="icon">
                    <core-icon-button on-click="{{showCalendar}}" icon="today"></core-icon-buton>
                </div>
            </div>
        </paper-input-decorator>
        <paper-action-dialog class="date-time-picker" backdrop autoCloseDisabled opened="{{calendarVisible}}">
            <tg-calendar></tg-calendar>
            <paper-button affirmative>Cancel</paper-button>
            <paper-button affirmative autofocus>Ok</paper-button>
        </paper-action-dialog>
    </template>
    <script>
        Polymer({
            ready: function () {
                this.$.decorator.labelVisible = false;
            },
            showCalendar: function (e) {
                this.calendarVisible = !this.calendarVisible;
            }
        });
    </script>
</polymer-element>