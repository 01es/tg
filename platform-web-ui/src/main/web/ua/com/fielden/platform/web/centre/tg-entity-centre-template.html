<!--@imports-->

<link rel="import" href="/resources/centre/tg-selection-criteria.html">
<link rel="import" href="/resources/centre/tg-entity-centre.html">
<link rel="import" href="/resources/centre/tg-entity-centre-behavior.html">

<link rel="import" href="/resources/polymer/paper-button/paper-button.html">

<!-- EGI imports -->
<!-- <link rel="import" href="/resources/egi/tg-entity-grid-inspector.html">

<link rel="import" href="/resources/actions/tg-page-action.html">

<link rel="import" href="/resources/polymer/core-icon-button/core-icon-button.html">
<link rel="import" href="/resources/polymer/core-tooltip/core-tooltip.html">
<link rel="import" href="/resources/polymer/core-icons/core-icons.html">
<link rel="import" href="/resources/polymer/core-icons/editor-icons.html">
<link rel="import" href="/resources/polymer/core-icons/hardware-icons.html"> -->

<!-- <polymer-element name="tg-@entity_type-selection-criteria" extends="tg-selection-criteria">
    <template>
        <shadow></shadow>
        CRITERIA EDITORS DOM (GENERATED)
        @criteria_editors
    </template>
    <script>
        (function () {
            Polymer({});
        })();
    </script>
</polymer-element> -->

<dom-module id="tg-@entity_type-centre">
    <style>
        /* * /deep/ core-tooltip::shadow #tooltip {
            white-space: normal;
        }
        * /deep/ core-tooltip .span-tooltip {
            line-height: 15px;
        }
        core-icon-button.revers::shadow core-icon {
            transform: scale(-1, 1);
        }
        core-tooltip.delayed:hover::shadow .core-tooltip,
        core-tooltip.delayed:focus::shadow .core-tooltip {
            opacity: 1;
            -webkit-transition-delay: 1s;
            transition-delay: 1s;
            transform: translate3d(0px, 0px, 0px);
        } */
        .selection-criteria {
            background-color: white;
        }
        .group {
            margin-left: 30px;
        }

        /* core-icon-button,
        tg-ui-action::shadow core-icon-button,
        tg-page-action::shadow core-icon-button {
            padding: 4px;
            margin: 0px;
        } */
    </style>

    <template>
        <tg-entity-centre 
        	_selected-view="[[_selectedView]]"
        	_select-page="[[_selectPage]]"
        	_url="[[_url]]"
        	_process-saver-response="[[_processSaverResponse]]"
        	_process-saver-error="[[_processSaverError]]"
        	_process-discarder-response="[[_processDiscarderResponse]]"
        	_process-discarder-error="[[_processDiscarderError]]"
        	_selected-page="[[_selectedPage]]"
        	_handle-scroll="[[_handleScroll]]"
        	_saver-disabled="[[_saverDisabled]]"
        	_discarder-disabled="[[_discarderDisabled]]"
        	save="[[save]]"
        	discard="[[discard]]"
        	run="[[run]]"
        	>
        	<h1 id="selection_criteria" class="custom-selection-criteria">SELECTION CRITERIA</h1>
            <!-- <tg-@entity_type-selection-criteria id="selection_criteria" class="custom-selection-criteria" uuid="{{uuid}}" mi-type="@mi_type" post-run="[[_postRun]]" get-selected-entities="[[_getSelectedEntities]]" post-retrieved="[[postRetrieved]]" @queryEnhancerContextConfig></tg-@entity_type-selection-criteria> -->

	        <h1 id="egi" class="entity-grid-inspector custom-egi">EGI</h1>
            <!-- <tg-entity-grid-inspector id="egi" class="entity-grid-inspector custom-egi" entityType="@full_entity_type" @gridLayout>
                EGI COLUMNS DOM (GENERATED)
                @egi_columns

                <core-tooltip class="delayed entity-specific-action" tabIndex="-1">
                    <core-icon-button icon="add-circle-outline"></core-icon-button>
                    <tg-page-action icon="add-circle-outline" action="[[_newAction]]"></tg-page-action>
                    <span class="span-tooltip" tip>Create new entity</span>
                </core-tooltip>
                <core-tooltip class="delayed entity-specific-action" tabIndex="-1">
                    <tg-page-action icon="editor:mode-edit" action="[[_editAction]]"></tg-page-action>
                    <span class="span-tooltip" tip>Edit selected entity</span>
                </core-tooltip>
                <core-tooltip class="delayed entity-specific-action" tabIndex="-1">
                    <tg-page-action icon="remove-circle-outline" action="{{deleteAction}}"></tg-page-action>
                    <span class="span-tooltip" tip>Delete selected entities</span>
                </core-tooltip> -->
                <!-- GENERATED FUNCTIONAL ACTIONS: -->
                <!--@functional_actions-->

                <!-- <core-tooltip class="delayed standart-action" tabIndex="-1">
                    <core-icon-button icon="file-download"></core-icon-button>
                    <span class="span-tooltip" tip>Export to Excel</span>
                </core-tooltip>
                <core-tooltip class="delayed standart-action" tabIndex="-1">
                    <core-icon-button class="revers" icon="hardware:keyboard-tab" on-tap="{{firstPage}}" disabled?="{{canNotFirst($.selection_criteria.pageNumber, $.selection_criteria.pageCount)}}"></core-icon-button>
                    <span class="span-tooltip" tip>First page</span>
                </core-tooltip>
                <core-tooltip class="delayed standart-action" tabIndex="-1">
                    <core-icon-button icon="hardware:keyboard-backspace" on-tap="{{prevPage}}" disabled$="[[canNotPrev($.selection_criteria.pageNumber)]]"></core-icon-button>
                    <span class="span-tooltip" tip>Previous page</span>
                </core-tooltip>
                <span class="standart-action">{{$.selection_criteria.pageNumberUpdated !== null ? ($.selection_criteria.pageNumberUpdated + 1) : 1}} / {{$.selection_criteria.pageCountUpdated !== null ? $.selection_criteria.pageCountUpdated : 1}}</span>
                <core-tooltip class="delayed standart-action" tabIndex="-1">
                    <core-icon-button class="revers" icon="hardware:keyboard-backspace" on-tap="{{nextPage}}" disabled?="{{canNotNext($.selection_criteria.pageNumber, $.selection_criteria.pageCount)}}"></core-icon-button>
                    <span class="span-tooltip" tip>Next page</span>
                </core-tooltip>
                <core-tooltip class="delayed standart-action" tabIndex="-1">
                    <core-icon-button icon="hardware:keyboard-tab" on-tap="{{lastPage}}" disabled?="{{canNotLast($.selection_criteria.pageNumber, $.selection_criteria.pageCount)}}"></core-icon-button>
                    <span class="span-tooltip" tip>Last page</span>
                </core-tooltip>
                <core-tooltip class="delayed standart-action" tabIndex="-1">
                    <core-icon-button icon="refresh" on-tap="{{currentPage}}" disabled?="{{canNotCurrent($.selection_criteria.pageNumber, $.selection_criteria.pageCount)}}"></core-icon-button>
                    <span class="span-tooltip" tip>Refresh</span>
                </core-tooltip>
                @primary_action
                tg-primary-instance-action action="[[_showMaster]]" actionDesc="action description" icon="editor:mode-edit"></tg-primary-instance-action> 
                @secondary_actions
            </tg-entity-grid-inspector> -->
        </tg-entity-centre>
    </template>
</dom-module>

<script>
    (function () {
        Polymer({
        	is: 'tg-@entity_type-centre',
        	
        	behaviors: [ Polymer.TgBehaviors.TgEntityCentreBehavior ],
        	
            hostAttributes: {
                "class": "layout vertical",
               	"entity-type": "@full_entity_type",
               	"mi-type": "@mi_type",
               	"get-master-entity": "null"
            },
            
            properties: {
            	_handleScroll: {
            		type: Function
            	}
            },
        	
            /**
             * Initialisation block. It has all children web components already initialised.
             */
            ready: function () {
                var self = this;
                
                self.postRetrieved = (function (entity, newBindingEntity, customObject) {
                    console.log("centre postRetrieved");
                }).bind(self);
                
                self._handleScroll = (function (e) {
                    this.fire("scroll-container", e.target);
                }).bind(self);
                
                // TODO smth. like this should be generated here:
                self.topLevelActions = [
                    //generatedActionObjects
                ];
                self.secondaryActions = [
                    //generatedSecondaryActions
                ];
                self.primaryAction = [
                    //generatedPrimaryAction
                ];
                self.propActions = [
                    //generatedPropActions
                ];
            }
        });
    })();
</script>