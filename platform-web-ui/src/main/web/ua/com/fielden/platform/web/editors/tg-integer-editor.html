<link rel="import" href="/resources/polymer/polymer/polymer.html">

<link rel="import" href="/resources/editors/tg-editor-behavior.html">
<link rel="import" href="/resources/polymer/paper-input/paper-input-container.html">
<link rel="import" href="/resources/polymer/iron-input/iron-input.html">
<!-- link rel="import" href="/resources/master/actions/tg-property-action.html" -->
<!-- link rel="import" href="/resources/polymer/core-tooltip/core-tooltip.html" -->
<link rel="import" href="/tg-reflector">

<dom-module id="tg-integer-editor"> <!-- extends="tg-editor" -->
    <style>
      	/* TODO please, migrate the styles to new version: */
    	/* TODO please, migrate the styles to new version: */
    	/* TODO please, migrate the styles to new version: */
    	/* TODO please, migrate the styles to new version: */
    	/* TODO please, migrate the styles to new version: */
    	/* TODO please, migrate the styles to new version: */
    	/* TODO please, migrate the styles to new version: */
    	/* TODO please, migrate the styles to new version: */
    	/* TODO please, migrate the styles to new version: */
    	/* TODO please, migrate the styles to new version: */

        /* input[type=number]::-webkit-outer-spin-button,
        input[type=number]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        input[type=number] {
            -moz-appearance: textfield;
        } */
    </style>

    <template>
        <paper-input-container id="decorator" attr-for-value="editing-value" disabled$="{{_isDisabled(currentState, entity, propertyName)}}"> <!-- no-label-float -->
        	<label>[[propTitle]]</label>
            <div> <!-- TODO layout horizontal  -->
                <div id="input-container"> <!--   flex -->
	                <input id="input" is="iron-input" type="number" step="1" prevent-invalid-input bind-value="{{editingValue}}" committed-value="{{commValue}}" disabled$="{{_isDisabled(currentState, entity, propertyName)}}">
                
					<!-- <core-tooltip position="bottom" tabIndex="-1" class="delayed" style="width:100%" disabled="{{!tooltip(propDesc)}}">
						<input id="input" is="iron-input" type="number" step="1" prevent-invalid-input bind-value="{{editingValue}}" committed-value="{{commValue}}" disabled$="{{_isDisabled(currentState, entity, propertyName)}}">
						<span class="span-tooltip" tip>
                            {{tooltip(propDesc)}}
                        </span>
                    </core-tooltip> --> 
                </div>
                <!-- <div id="icon" hidden?="{{!action}}">
                    <tg-property-action entitytype="{{action.entitytype}}" preAction="{{action.preAction}}" postActionSuccess="{{action.postActionSuccess}}" postActionError="{{action.postActionError}}" enabledStates="{{action.enabledStates}}" longDesc="{{action.longDesc}}" shortDesc="{{action.shortDesc}}" icon="{{action.icon}}" currentState="{{currentState}}"></tg-property-action>
                </div> -->
            </div>
        </paper-input-container>
        
        <!-- <shadow></shadow> -->
        
        <!-- p>$.input.committedValue: {{$.input.committedValue}}</p -->

        <tg-reflector id="reflector"></tg-reflector>

        <template is="dom-if" if="{{debug}}">
            <p>editingValue: <i>{{editingValue}}</i></p>
            <p>commValue: <i>{{commValue}}</i></p>
            <p>acceptedValue: <i>{{acceptedValue}}</i></p>
            <p>_bindingValue: <i>{{_bindingValue(entity, propertyName)}}</i></p>
        </template>
    </template>
</dom-module>

    <script>
        Polymer({
        	is: 'tg-integer-editor',
        	behaviors: [ Polymer.TgEditorBehavior ],
        	
            /**
             * Converts the value into string representation (which is used in edititing / comm values).
             */
            convertToString: function (value) {
                return value === null ? "" : "" + value;
            },

            /**
             * Converts the value from string representation (which is used in edititing / comm values) into concrete type of this editor component (Number).
             */
            convertFromString: function (strValue) {
                return strValue === '' ? null : parseInt(strValue);
            }
        });
    </script>