<link rel="import" href="/resources/components/moment-component.html">

<script>
    /**
     * Returns milliseconds from 1-st Jan 1970 in current locale, defined in momentjs.
     * 
     * Please, use this function only in environment with moment(...) function defined.
     * Currently it is used in date-specific unit testing.
     */
    var _millis = function (fullDateString) { // using strict 'DD/MM/YYYY HH:mm:ss.SSS' format 
        return moment(fullDateString, 'DD/MM/YYYY HH:mm:ss.SSS', true).valueOf();
    };
    
    var _millisDateRepresentation = function (dateMillis, timeZone) {
        var millisecondsRemainder = dateMillis % 1000;
        var millisecondsExist = (millisecondsRemainder !== 0);
        if (millisecondsExist) {
            return (timeZone ? moment.tz(dateMillis, timeZone) : moment(dateMillis)).format('L LTS');
        } else {
            var secondsRemainder = (dateMillis - millisecondsRemainder) % 60;
            var secondsExist = (secondsRemainder !== 0);
            if (secondsExist) {
                return (timeZone ? moment.tz(dateMillis, timeZone) : moment(dateMillis)).format('L LTS');
            }
        }
        return (timeZone ? moment.tz(dateMillis, timeZone) : moment(dateMillis)).format('L LT');
    };
</script>