<link rel="import" href="/resources/polymer/polymer/polymer.html">
<link rel="import" href="/resources/element_loader/tg-element-loader.html">

<dom-module id="tg-mobile-view">
    <style>
        .toolbar {
            padding: 0 16px;
            height: 20px;
            color: white;
            background-color: #0288D1
        }
    </style>
    <template>
        <div class="toolbar">[[menuItem.title]]</div>
        <tg-element-loader id="elementToLoad" import="[[menuItem.view.import]]" element-name="[[menuItem.view.elementName]]" attrs="[[menuItem.view.attrs]]" on-after-load="_afterLoadListener"></tg-element-loader>
    </template>
</dom-module>
<script>
    (function () {
        Polymer({

            is: "tg-mobile-view",

            properties: {
                menuItem: Object
            },

            hostAttributes: {
                "class": "layout vertical"
            },

            reload: function () {
                this.$.elementToLoad.reload();
            },

            _afterLoadListener: function (e, detail, view) {
                var self = this;
                if (e.target === this.$.elementToLoad) {
                    detail.postRetrieved = function (entity, bindingEntity, customObject) {};
                    detail.postValidated = function (validatedEntity, bindingEntity, customObject) {};
                    detail.postSaved = function (potentiallySavedEntity, newBindingEntity) {};
                    detail.retrieve();
                }
            }
        });
    })();
</script>