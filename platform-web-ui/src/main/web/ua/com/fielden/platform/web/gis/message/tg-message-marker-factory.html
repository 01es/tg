<link rel="import" href="/resources/gis/tg-marker-factory.html">

<script>
(function() {
	var MessageMarkerFactory= function() {
		L.GIS.MarkerFactory.call(this);
	};

	MessageMarkerFactory.prototype = Object.create(L.GIS.MarkerFactory.prototype);
	MessageMarkerFactory.prototype.constructor = MessageMarkerFactory;

	MessageMarkerFactory.prototype.createFeatureMarker = function (feature, latlng) {
		if (feature) {
			var featureType = featureType(feature);
			if (featureType === 'Message') {
				return L.GIS.MarkerFactory.prototype.createFeatureMarker.call(this, feature, latlng);
			} else {
				throw "MessageMarkerFactory.prototype.createFeatureMarker: [" + feature + "] has unknown type == [" + featureType + "]. Should be 'Message' only.";
			}
		} else {
			throw "MessageMarkerFactory.prototype.createFeatureMarker: [" + feature + "] is empty.";
		}
	}

	L.GIS = L.GIS || {};
	L.GIS.MessageMarkerFactory = MessageMarkerFactory;
})();
</script>