<link rel="import" href="/resources/polymer/polymer/polymer.html">
<link rel="import" href="/resources/polymer/paper-tabs/paper-tabs.html">
<link rel="import" href="/resources/polymer/paper-tabs/paper-tab.html">
<link rel="import" href="/resources/components/postal-lib.html">

<link rel="import" href="/resources/polymer/iron-pages/iron-pages.html">

<dom-module id="tg-entity-centre">
	<style>
    	.tabs {
    		background-color: #0288D1;
    		color: #fff;
    	}
    	
    	iron-pages {
            overflow: auto;
            position: absolute;
            top: 48px;
            left: 0px;
            right: 0px;
            bottom: 0px;
        }
    </style>

    <template>
        <tg-serialiser id="serialiser"></tg-serialiser>
        <div class="tabs layout horizontal center-justified">
            <paper-tabs selected="{{selectedView}}" style="max-width:600px" flex on-core-transitionend="{{selectPage}}">
                <paper-tab>Selection</paper-tab>
                <paper-tab>Details</paper-tab>
            </paper-tabs>
        </div>
        
        <core-ajax id="ajaxSaver" url="/centre/{{mitype}}" method="POST" handleas="json"></core-ajax>
        <core-ajax id="ajaxDiscarder" url="/centre/{{mitype}}" method="DELETE" handleas="json"></core-ajax>



        <iron-pages selected="[[_selectedPage]]" on-scroll="handleScroll">
            <div>
                <div class="selection-criteria layout vertical" style="padding: 40px;">
                	<content select=".custom-selection-criteria"></content>
                    <div class="layout horizontal justified" style="margin-top:40px;">
                        <div class="layout horizontal">
                            <paper-button id="saver" raised roll="button" on-tap="{{save}}" disabled?="{{!canSave($.selection_criteria._isCentreChanged)}}">Save</paper-button>
                            <paper-button id="discarder" raised roll="button" on-tap="{{discard}}" disabled?="{{!canDiscard($.selection_criteria._isCentreChanged)}}">Discard</paper-button>
                        </div>
                        <paper-button id="runner" raised roll="button" on-tap="{{run}}" style="margin-right: 0px;">Run</paper-button>
                    </div>
                </div>
            </div>
            <div>
                <div class="layout vertical center">
                	<content select=".custom-egi"></content>
                </div>
            </div>
        </iron-pages>
    </template>
</dom-module>