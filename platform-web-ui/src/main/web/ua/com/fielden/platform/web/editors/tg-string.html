<link rel="import" href="/resources/polymer/polymer/polymer.html">

<link rel="import" href="/resources/polymer/core-input/core-input.html">
<link rel="import" href="/resources/polymer/paper-input/paper-input-decorator.html">

<polymer-element name="tg-string">
    <template>

		<paper-input-decorator id="decorator" label="{{label}}" floatingLabel value="{{editingValue}}">
			<input id="input" is="core-input" value="{{editingValue}}" committedValue="{{acceptedValue}}"> <!-- on-change="{{changeAction}}" -->
		</paper-input-decorator>
		<p>editingValue: {{editingValue}}</p>
		<p>bindTo: {{bindTo}}</p>
		<p>acceptedValue: {{acceptedValue}}</p>
		<p>$.input.committedValue: {{$.input.committedValue}}</p>

    </template>
    <script>
        Polymer('tg-string', {            
        	publish: {
              /**
		       	* The label for this editor. It normally appears as the caption for the editor.
       			*
       			* @attribute label
       			* @type string
       			* @default 'Unknown label. Please specify the label for the editor.'
       			*/
			    label: 'Unknown label. Please specify the label for the editor.',	            

			    /**
			     * This published property specifies to what entity property this editor should be bound.
			     */ 
				bindTo: null,

				/**
				 * This callback should be used for custom action after the 'acceptedValue' has been changed (for e.g. validation).
				 */
				onAcceptedValueChanged: null
        	},

        	/**
        	 * The value being edited.
        	 */
        	editingValue: '',
        	/**
        	 * The value being accepted (committed) after the editing.
        	 */
			acceptedValue: '',

            ready: function() {
                this.$.decorator.labelVisible = false;
            },

            /**
    		 * This method is called during editing.
    		 */ 
		    editingValueChanged: function(oldValue, newValue) {
            	console.log("editingValueChanged", oldValue, newValue);
      			this.$.decorator.updateLabelVisibility(this.editingValue);
    		},

    		/**
    		 * This method is called once the bindTo property was changed from the outside of the component.
    		 */ 
            bindToChanged: function(oldValue, newValue) {
            	console.log("bindToChanged", oldValue, newValue);
            	this.editingValue = newValue;
            },

    		/**
    		 * This method is called once the the accepted value was changed after the editor has commited its value.
    		 */ 
			acceptedValueChanged: function(oldValue, newValue) {
            	console.log("acceptedValueChanged", oldValue, newValue);

            	this.bindTo = newValue;
            	this.onAcceptedValueChanged();
            }
        });
    </script>
</polymer-element>