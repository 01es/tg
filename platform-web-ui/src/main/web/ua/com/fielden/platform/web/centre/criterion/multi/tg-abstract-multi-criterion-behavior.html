<link rel="import" href="/resources/polymer/polymer/polymer.html">

<link rel="import" href="/resources/centre/criterion/tg-abstract-criterion-behavior.html">

<script>
	Polymer.TgBehaviors = Polymer.TgBehaviors || {};
	Polymer.TgBehaviors.TgAbstractMultiCriterionBehaviorImpl = {
    	
        properties: {
        	/////////////////////////////////////////////////////////////////////////////////////////////////////////
        	////////////////////////////////////////// EXTERNAL PROPERTIES //////////////////////////////////////////
        	/////////////////////////////////////////////////////////////////////////////////////////////////////////
        	// These mandatory properties must be specified in attributes, when constructing <tg-*-editor>s.       //
        	// No default values are allowed in this case.														   //
        	/////////////////////////////////////////////////////////////////////////////////////////////////////////
        	
            /**
             * This published property specifies whether 'missing value' will be also considered in search queries.
             */
            orNull: {
            	type: Boolean,
            	notify: true, // TODO val: false
            	observer: 'orNullChanged'
            },

            /**
             * This published property specifies whether the criterion should be negated.
             */
            not: {
            	type: Boolean,
            	notify: true, // TODO val: false
            	observer: 'notChanged'
            },
            
        	/////////////////////////////////////////////////////////////////////////////////////////////////////////
        	//////////////////////////////////////////// INNER PROPERTIES ///////////////////////////////////////////
        	/////////////////////////////////////////////////////////////////////////////////////////////////////////
        	// These properties derive from other properties and are considered as 'private' -- need to have '_'   //
        	//   prefix and default values specified in 'value' specificator of the property definition (or,       //
        	//   alternatively, computing function needs to be specified). 									       //
        	/////////////////////////////////////////////////////////////////////////////////////////////////////////
            _orNull: {
            	type: Boolean,
            	value: false
            },
            _not: {
            	type: Boolean,
            	value: false
            }
        },

        // _range: false,
        // _single: false,
        // _dateRange: false, 

        _acceptMetaValues: function() {
            this.orNull = this._orNull;
            this.not = this._not;

            Polymer.TgBehaviors.TgAbstractCriterionBehavior._acceptMetaValues.call(this);
        },
        _cancelMetaValues: function() {
            this._orNull = this.orNull;
            this._not = this.not;
            
            Polymer.TgBehaviors.TgAbstractCriterionBehavior._cancelMetaValues.call(this);
        },
        
        orNullChanged: function (newValue, oldValue) {
            this._orNull = newValue;
        },
        notChanged: function (newValue, oldValue) {
            this._not = newValue;
        },
        
        /**
         * Returns 'true' if criterion has no meta values assigned, 'false' otherwise.
         */
        _hasNoMetaValues: function(orNull, not, exclusive, exclusive2, datePrefix, dateMnemonic, andBefore) {
        	return Polymer.TgBehaviors.TgAbstractCriterionBehavior._hasNoMetaValues.call(this, orNull, not, exclusive, exclusive2, datePrefix, dateMnemonic, andBefore) && 
        		orNull === false && not === false;
        }
    };
	
	Polymer.TgBehaviors.TgAbstractMultiCriterionBehavior = [
		Polymer.TgBehaviors.TgAbstractCriterionBehavior,
		Polymer.TgBehaviors.TgAbstractMultiCriterionBehaviorImpl
	];
</script>